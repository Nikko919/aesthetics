// js/catalog/catalog-pagination-init.js
// Инициализация пагинации для карточек каталога

// document.addEventListener('DOMContentLoaded', function () {
//   const cardsBox = document.querySelector('.catalog-cards-box');
//   if (!cardsBox) return;

//   const cards = Array.from(cardsBox.querySelectorAll('.card'));
//   const cardsPerPage = 8; // Количество карточек на странице

//   function showPage(pageNumber) {
//     cards.forEach(card => (card.style.display = 'none'));
//     const start = (pageNumber - 1) * cardsPerPage;
//     const end = start + cardsPerPage;
//     cards.slice(start, end).forEach(card => (card.style.display = ''));
//   }

//   // Инициализация пагинации
//   $('#pagination-container').pagination({
//     dataSource: cards,
//     pageSize: cardsPerPage,
//     callback: function (data, pagination) {
//       showPage(pagination.pageNumber);
//     },
//     hideOnlyOnePage: true,
//     prevText: `<svg width="8" height="14" viewBox="0 0 14 25" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M13.6487 22.6633C13.7503 22.7649 13.8309 22.8856 13.8859 23.0183C13.9409 23.1511 13.9692 23.2934 13.9692 23.4371C13.9692 23.5808 13.9409 23.7232 13.8859 23.8559C13.8309 23.9887 13.7503 24.1093 13.6487 24.211C13.5471 24.3126 13.4264 24.3932 13.2937 24.4482C13.1609 24.5032 13.0186 24.5315 12.8749 24.5315C12.7312 24.5315 12.5889 24.5032 12.4561 24.4482C12.3233 24.3932 12.2027 24.3126 12.1011 24.211L1.16356 13.2735C1.06186 13.1719 0.981189 13.0513 0.926147 12.9185C0.871105 12.7857 0.842773 12.6434 0.842773 12.4996C0.842773 12.3559 0.871105 12.2136 0.926147 12.0808C0.981189 11.948 1.06186 11.8274 1.16356 11.7258L12.1011 0.788303C12.3063 0.583071 12.5846 0.467773 12.8749 0.467773C13.1651 0.467773 13.4435 0.583071 13.6487 0.788303C13.8539 0.993535 13.9692 1.27189 13.9692 1.56213C13.9692 1.85237 13.8539 2.13073 13.6487 2.33596L3.48367 12.4996L13.6487 22.6633Z" fill="#343330"/></svg>`,
//     nextText: `<svg width="8" height="14" viewBox="0 0 14 25" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M0.351289 22.6633C0.249668 22.7649 0.16906 22.8856 0.114063 23.0183C0.0590658 23.1511 0.0307579 23.2934 0.0307579 23.4371C0.0307579 23.5808 0.0590658 23.7232 0.114063 23.8559C0.16906 23.9887 0.249668 24.1093 0.351289 24.211C0.452909 24.3126 0.573551 24.3932 0.706325 24.4482C0.839098 24.5032 0.981404 24.5315 1.12512 24.5315C1.26883 24.5315 1.41114 24.5032 1.54391 24.4482C1.67668 24.3932 1.79733 24.3126 1.89895 24.211L12.8364 13.2735C12.9381 13.1719 13.0188 13.0513 13.0739 12.9185C13.1289 12.7857 13.1572 12.6434 13.1572 12.4996C13.1572 12.3559 13.1289 12.2136 13.0739 12.0808C13.0188 11.948 12.9381 11.8274 12.8364 11.7258L1.89895 0.788303C1.69371 0.583071 1.41536 0.467773 1.12512 0.467773C0.834875 0.467773 0.55652 0.583071 0.351289 0.788303C0.146057 0.993535 0.0307579 1.27189 0.0307579 1.56213C0.0307579 1.85237 0.146057 2.13073 0.351289 2.33596L10.5163 12.4996L0.351289 22.6633Z" fill="#343330"/></svg>`
//   });

//   // Показываем первую страницу при загрузке
//   showPage(1);
// }); 




// js/catalog/catalog-pagination-init.js
// Инициализация пагинации для карточек каталога

document.addEventListener('DOMContentLoaded', function () {
  const allCards = Array.from(document.querySelectorAll('.catalog-cards-box .card'));
  const paginationContainer = $('#pagination-container');

  window.updatePagination = function (cardsToPaginate, pageSize) {
    if (!paginationContainer.length || !$.fn.pagination) return;

    // Уничтожаем старую пагинацию, если она есть
    if (paginationContainer.data('pagination')) {
      paginationContainer.pagination('destroy');
    }

    // Если карточек для отображения нет (например, пустая категория), ничего не делаем
    if (!cardsToPaginate || cardsToPaginate.length === 0) {
      allCards.forEach(card => card.style.display = 'none'); // Скрываем все, если результат фильтра пуст
      return;
    }

    paginationContainer.pagination({
      dataSource: cardsToPaginate,
      pageSize: pageSize,
      callback: function (data, pagination) {
        // Сначала скрываем ВСЕ карточки, а потом показываем только те, что для текущей страницы
        allCards.forEach(card => card.style.display = 'none');
        data.forEach(card => {
          if (card) card.style.display = '';
        });
      },
      hideOnlyOnePage: true,
      prevText: `<svg width="8" height="14" viewBox="0 0 14 25" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M13.6487 22.6633C13.7503 22.7649 13.8309 22.8856 13.8859 23.0183C13.9409 23.1511 13.9692 23.2934 13.9692 23.4371C13.9692 23.5808 13.9409 23.7232 13.8859 23.8559C13.8309 23.9887 13.7503 24.1093 13.6487 24.211C13.5471 24.3126 13.4264 24.3932 13.2937 24.4482C13.1609 24.5032 13.0186 24.5315 12.8749 24.5315C12.7312 24.5315 12.5889 24.5032 12.4561 24.4482C12.3233 24.3932 12.2027 24.3126 12.1011 24.211L1.16356 13.2735C1.06186 13.1719 0.981189 13.0513 0.926147 12.9185C0.871105 12.7857 0.842773 12.6434 0.842773 12.4996C0.842773 12.3559 0.871105 12.2136 0.926147 12.0808C0.981189 11.948 1.06186 11.8274 1.16356 11.7258L12.1011 0.788303C12.3063 0.583071 12.5846 0.467773 12.8749 0.467773C13.1651 0.467773 13.4435 0.583071 13.6487 0.788303C13.8539 0.993535 13.9692 1.27189 13.9692 1.56213C13.9692 1.85237 13.8539 2.13073 13.6487 2.33596L3.48367 12.4996L13.6487 22.6633Z" fill="#343330"/></svg>`,
      nextText: `<svg width="8" height="14" viewBox="0 0 14 25" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M0.351289 22.6633C0.249668 22.7649 0.16906 22.8856 0.114063 23.0183C0.0590658 23.1511 0.0307579 23.2934 0.0307579 23.4371C0.0307579 23.5808 0.0590658 23.7232 0.114063 23.8559C0.16906 23.9887 0.249668 24.1093 0.351289 24.211C0.452909 24.3126 0.573551 24.3932 0.706325 24.4482C0.839098 24.5032 0.981404 24.5315 1.12512 24.5315C1.26883 24.5315 1.41114 24.5032 1.54391 24.4482C1.67668 24.3932 1.79733 24.3126 1.89895 24.211L12.8364 13.2735C12.9381 13.1719 13.0188 13.0513 13.0739 12.9185C13.1289 12.7857 13.1572 12.6434 13.1572 12.4996C13.1572 12.3559 13.1289 12.2136 13.0739 12.0808C13.0188 11.948 12.9381 11.8274 12.8364 11.7258L1.89895 0.788303C1.69371 0.583071 1.41536 0.467773 1.12512 0.467773C0.834875 0.467773 0.55652 0.583071 0.351289 0.788303C0.146057 0.993535 0.0307579 1.27189 0.0307579 1.56213C0.0307579 1.85237 0.146057 2.13073 0.351289 2.33596L10.5163 12.4996L0.351289 22.6633Z" fill="#343330"/></svg>`
    });
  };

  // Инициализация пагинации при первой загрузке страницы (показываем 8 карточек)
  window.updatePagination(allCards, 8);
}); 